# 一、图表类型

| 图表类型               | 定义                                               | 选择场景                          | 举例                                                         |
| :----------------- | :----------------------------------------------- | :---------------------------- | :--------------------------------------------------------- |
| 直方图（Histogram）     | 展示**连续型数据**的分布，将数据分成区间（bins）统计频数。                | 用来观察**连续数据的分布情况**，如集中趋势、离散情况。 | 员工工资分布、病人等待时间、芝加哥市民体重、年轻人社交媒体使用时间。                         |
| Bar Chart（条形图）     | 展示**离散型数据（discrete）**数量或频率，通常用于比较**不同类别之间的大小差异** | **适用于离散类别数据**，比如：性别、地区、产品种类等。 | **员工满意度**：不同的满意度评分（如：非常满意、满意、一般、不满意）分别有多少人。                |
| 箱线图（Box Plot）      | 展示数据的分布、四分位数、中位数及异常值（outliers）。                  | 对比**不同组别的分布差异**或识别**异常值**。    | 满意度得分分析。（看Q1 - Q3区间）                                       |
| 折线图（Line Chart）    | 用线条连接数据点，展示数值随某一变量（通常是时间）的变化趋势。                  | 主要用于**时间序列数据**的变化趋势展示。        | 按类别分类的预算变化、多年开销数据展示。                                       |
| 散点图（Scatter Plot）  | 用点展示两个**连续变量**之间的关系。                             | 研究**两个连续变量之间的相关性**。           | 广告支出与销售收入关系、账单金额与小费关系（带浅蓝色置信区间）、睡眠时长与情绪关系、每增加10万花费带来的新用户数。 |
| 热力图（Heatmap）       | 用颜色深浅表示数值大小，通常在二维矩阵中展示。                          | 用来观察**两个分类变量组合下的数值分布密度或强度**。  | 银行首页鼠标点击与移动频率、按小时和星期几划分的急诊室等待时间。                           |
| 数据透视表（Pivot Table） | 将数据按照一个或多个维度进行分类、聚合，并以表格方式展示。                    | 聚合和对比**多个分类变量的数值型数据**。        | 比较不同职位的平均工资、数值在两个分类维度上的聚合展示。                               |

---

**快速记忆小结：**

- **分布情况** → 直方图、箱线图
- **趋势随时间变化** → 折线图
- **两个连续变量关系** → 散点图（必要时加回归线）
- **两个分类组合的密度/频率** → 热力图
- **按分类聚合数值** → 数据透视表
    
# 二、 重要SQL函数和写法总结

### 2.1 求均值和标准差

- **均值（Mean）** → 使用 `AVG()` 函数

    `SELECT AVG(score) AS mean_score FROM table_name;`
    
- **标准差（Standard Deviation）** → 使用 `STDDEV()` 函数

    `SELECT STDDEV(score) AS std_dev_score FROM table_name;`
    
### 2.2 求百分位数（四分位）

- **25% 和 50% 分位数（中位数）** → 使用 `PERCENTILE_CONT()`
    ```
    SELECT    
    PERCENTILE_CONT(0.25) WITHIN GROUP (ORDER BY Price) AS percentile_25, 
    PERCENTILE_CONT(0.50) WITHIN GROUP (ORDER BY Price) AS percentile_50 FROM      products;
    ```

### 2.3 计算价格区间（最大值-最小值）

- **价格区间（Price Range）**
    `MAX(Price) - MIN(Price)`

### 2.4 计算总体体积的标准差

- **总体Volume标准差**
    `STDDEV(volume)`
    
- **按年份分组计算Volume标准差**
    `STDDEV(volume) AS stddev_volume FROM sales  GROUP BY year;`
    

### 2.5 找出最常见的运费（most common）

- **如果支持`MODE()`
    
    `SELECT  MODE() WITHIN GROUP (ORDER BY shipping_cost) AS most_common_shipping_cost FROM orders;`
    
- **如果不支持`MODE()`，使用GROUP BY + ORDER BY**
  ```
    SELECT   shipping_cost,  COUNT(*) AS frequency 
    FROM      orders 
    GROUP BY      shipping_cost 
    ORDER BY      frequency DESC LIMIT 1;
    ```
---

# 三、实验设计
## 1. 变量类型

**Confounding Variable（混杂变量）**
- 定义：同时影响自变量(independent variable)和因变量(dependent variable)，掩盖真实关系的变量。
- 例子：研究运动对减肥的影响时，饮食习惯就是一个混杂变量。
    

**Exposure（暴露）**
- 定义：被试或观察对象接触到某种影响因素。
- 例子：是否吸烟。
    

**Response（反应）**
- 定义：被测量的结果或变化。
- 例子：是否患上肺病。
    

**Control（控制）**
- 定义：在实验中保持不变的条件，用于排除其他影响。
- 例子：所有参与者每天睡眠时间保持一样。
    

---
## 2. 各种分布

### 2.1 常见分布
**Geometric Distribution**（几何分布）

- 定义：第一次成功前需要的失败次数。
- 例子：投硬币，第一次正面出现之前需要多少次失败（反面）。
    
**Binomial Distribution**（二项分布）

- 定义：固定次数试验中成功的次数，每次成功概率固定。
- 例子：掷10次硬币，统计出现正面的次数。
    
**Exponential Distribution**（指数分布）

- 定义：连续时间(continuous time)内等待某个事件发生的时间。
- 例子：等待下一辆公交车到达的时间。
    
**Poisson Distribution**（泊松分布）

- 定义：固定时间或空间内事件发生的次数，事件独立且发生率恒定。
- 例子：每天接到的客户投诉数量。

### 2.2 非正态分布时的独立性检验

- 定义：当数据不符合正态分布时，不能用传统的T检验等，要用**非参数检验**。
- 正确方法：**Chi-square test for independence（卡方独立性检验）**。
- 例子：调查性别与是否喜欢看篮球比赛是否有关联。

### 2.2 各分布总结

| 分布类型                             | 定义                 | 例子                                                                       | 口诀                             |
| -------------------------------- | ------------------ | ------------------------------------------------------------------------ | ------------------------------ |
| Poisson                          | 固定时间内事件次数          | 每小时收到多少封邮件                                                               | 泊松数次数                          |
| Exponential                      | 连续时间内事件等待时间        | 等下一辆地铁来临的时间                                                              | 指数等时间                          |
| Geometric                        | 第一次成功前失败的次数        | 投币第一次出现正面时，连续出现反面的次数。                                                    | 几何数失败                          |
| Binomial                         | 固定次数成功次数           | 掷骰子5次出“6”的次数                                                             | 二项数成功                          |
| Normal                           | 连续数据的钟形分布（正态分布）    | 学生成绩分布                                                                   | 正态钟型分布常见                       |
| T Distribution                   | 样本量小、总体方差未知时使用<br> | 你开了两家奶茶店，分别有10个人试喝，想比较哪家店的奶茶更受欢迎。样本很小，比较两组平均值差异。                         | 两组比均值                          |
| F Distribution                   | 两个以上样本方差<br>       | 比较**三种不同学习方法**（比如自学、跟班、网课）对学生成绩的影响。<br>首先要通过F检验看看三组学生成绩的方差是否一致，才能进行后续分析。 | 多组看差异                          |
| 卡方检验Chi-square test for independence | 数据偏斜、类别型数据<br>     | 调查男女生是否喜欢篮球，性别是分类数据。（catagorial data）                                    | （1）变量独立 （2）验证结果是否拟合某种规律 |

---

## 3. 研究设计类型

| 类型                      | 定义                          | 小例子<br>               |
| ----------------------- | --------------------------- | --------------------- |
| **Experimental**（实验设计）  | 人为操控**自变量**，看对**因变量**的影响。   | 给一组人喝咖啡，另一组喝水，看谁跑得更快。 |
| **Correlational**（相关设计） | 观察变量之间**是否相关**，但不操控变量。      | 看睡眠时间和成绩之间有没有相关性。     |
| **Descriptive**（描述性设计）  | 单纯**描述现象**，不探究因果关系。         | 调查学生每天看手机几小时          |
| **Explanatory**（解释性研究）  | 进一步解释**为什么**出现某种现象，探索机制或原因。 | 研究为什么经常运动的人压力水平较低。    |

---

## 4. 零假设与备择假设

**Null Hypothesis（零假设 H₀）**

- 定义：**零假设**就是一开始我们**假设“没变化、没效果、没关系“。
- 运用： 看看**零假设能不能被推翻**。如果数据告诉我们“有变化”，我们就**拒绝零假设**。如果数据告诉我们“不确定或没发现明显变化”，我们就**保留零假设**。 
    

**Alternative Hypothesis（备择假设 H₁）**

- 定义：认为存在差异或有效应。
- 例子：新药能显著提高治愈率。

**Null Hypothesis & Alternative Hypothesis：**
- 关系对立
- 零假设被推翻了，有**足够证据**支持备择假设。
- 零假设 H₀：新药效果=旧药。备择假设 H₁：新药效果更好。P值<0.05，零假设被推翻，**有足够证据支持**新药效果更好。

---

## 5. 假设检验
### 5.1 检验前测

| 设计类型                              | 特点                  | 例子                  | 目的                                  |
| --------------------------------- | ------------------- | ------------------- | ----------------------------------- |
| Random two group pretest-posttest | 有前测和后测，对比变化情况       | 两组学生先测成绩，再分别接受不同教学法 | 检测处理前后有没有变化。容易受“前测效应”影响。            |
| Random two group posttest only    | 只有后测，避免前测影响         | 两组学生直接进行教学后比较成绩     | 避免前测影响，但不能知道处理前基线是否一致。              |
| Solomon four group                | 结合前测组和无前测组，全面检测交互效应 | 部分学生有前测，部分无前测       | **专门检测交互效应**（前测 × 处理的互动），最全面最保险的方法！ |
| Factorial                         | 同时考察两个以上变量及其交互效应    | 测试教学方法和学习时间对成绩的共同影响 | 分析各因素和它们**交互作用**（不是专门为了检测前测效应）。     |
例子：
- 你想测试“一个新的数学辅导课”是否提高学生成绩。
- 但你担心：提前让学生做前测，会不会让他们特别注意考试内容，从而影响后面结果？
- 分组：有的组做前测+辅导；有的组只辅导；有的组只前测；有的啥也不做
- **Solomon四组设计**可以帮你分清：
    - 是辅导课起了作用？    
    - 还是前测让学生特别留心而变好了？

### 5.2 估计点的统计显著性 （The statistical significance）
- 衡量样本中某个估计值是否具有代表性（是否可能由于随机性而出现，还是有真正的实际效应）

**置信区间（Confidence Interval）**
- 定义：在一定置信水平下，推断总体参数落在某一范围内。
- 例子：95%置信区间为(3,6)，意味着有95%的信心总体均值在3到6之间。
- 置信区间由样本均值（SM） ±（Z或T值 × 标准误差SE）组成。

**p值**：如果p值小于0.05或0.01，就可以拒绝零假设，说明样本中的估计点有统计学意义。

| 回归分析图（Scatter plot with confidence bands） | 在散点图上拟合一条回归线，并画出其置信区间（通常是浅色带）。                   | 需要同时观察**变量关系及不确定范围（confidence bands）**。 | 账单金额与小费的关系（浅蓝色带）。                                          |
| :---------------------------------------- | :----------------------------------------------- | :-------------------------------------- | :--------------------------------------------------------- |
